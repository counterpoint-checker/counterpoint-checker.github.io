(this["webpackJsonpsimple-reactjs-app"]=this["webpackJsonpsimple-reactjs-app"]||[]).push([[0],{298:function(t){t.exports=JSON.parse('{"apikey":"pUQnnpujqRWcm5aQS295rLvQ79VjPrAW"}')},317:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),o=n(16),r=n.n(o),i=n(20),c=n(18),u=n(23),l=n(24),p=n(386),d=n(382),j=n(385),h=n(59),b=n(383),m=n(169),f=n(53),v=n(377),g=n(6),O=n(100),x=n(135),N=n(371),y=n(372),C=n(70),k=n(373),w=n(5),S=Object(x.a)((function(t){return{root:{flexGrow:1}}}));function A(){var t=S();return Object(w.jsxs)("div",{children:[Object(w.jsx)(N.a,{children:Object(w.jsxs)(y.a,{children:[Object(w.jsx)("div",{className:t.root,children:Object(w.jsx)("img",{width:"222",src:"https://media.discordapp.net/attachments/705838282440835164/866890707494109194/logo1_no_background.png"})}),Object(w.jsx)(m.a,{className:t.root,variant:"body1",children:"Online autograder for a basic music composition exercise"}),Object(w.jsx)(C.a,{color:"inherit",href:"https://github.com/counterpoint-checker",target:"_blank",children:Object(w.jsx)(k.a,{})})]})}),Object(w.jsx)(y.a,{})]})}var R=n(374),P=n(101),T=n(127),E=n(43),I=Object(x.a)((function(t){return{root:{},paper:{padding:t.spacing(2)}}}));function L(t){var e=I();return Object(w.jsx)(R.a,{item:!0,xs:!0,children:Object(w.jsx)(P.a,{className:e.paper,children:Object(w.jsx)(m.a,{variant:"h6",className:e.title,children:t.label})})})}function _(t){var e=I();return Object(w.jsx)(R.a,{item:!0,xs:!0,children:Object(w.jsx)(P.a,{className:e.paper,children:Object(w.jsx)(T.a,{select:!0,label:"Key",value:t.clef,onChange:function(e){return t.setClef(e.target.value)},children:"Treble Alto Bass".split(" ").map((function(t){return Object(w.jsx)(E.a,{value:t,children:t})}))})})})}function D(t){var e=I();return Object(w.jsx)(R.a,{item:!0,xs:!0,children:Object(w.jsx)(P.a,{className:e.paper,children:Object(w.jsx)(T.a,{label:"Notes",value:t.notes,onChange:function(e){return t.setNotes(e.target.value)},InputProps:{readOnly:!0}})})})}function G(t){var e=I(),n=["Key: [note][#,b, ][m, ]","e.g. C, C#, Cm, C#m"];return Object(w.jsxs)(R.a,{container:!0,spacing:3,children:[Object(w.jsxs)(R.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(w.jsx)(L,{label:"Cantus Firmus"}),Object(w.jsx)(_,{clef:t.clef1,setClef:t.setClef1}),Object(w.jsx)(D,{notes:t.notes1,setNotes:t.setNotes1}),Object(w.jsx)(R.a,{item:!0,xs:!0,children:Object(w.jsx)(P.a,{className:e.paper,children:Object(w.jsx)(T.a,{label:"Key",value:t.key1,onChange:function(e){return t.setKey(e.target.value)}})})})]}),Object(w.jsxs)(R.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(w.jsx)(L,{label:"Counterpoint"}),Object(w.jsx)(_,{clef:t.clef2,setClef:t.setClef2}),Object(w.jsx)(D,{notes:t.notes2,setNotes:t.setNotes2}),Object(w.jsx)(R.a,{item:!0,xs:!0,children:n.map((function(t){return Object(w.jsx)(m.a,{children:t})}))})]})]})}var M=n(160),B=n(161),K=n.n(B),U=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"renderAbcNotation",value:function(t,e,n,a){K.a.renderAbc("id",t,e,n,a)}},{key:"componentDidMount",value:function(){var t=this.props,e=t.abcNotation,n=t.parserParams,a=t.engraverParams,s=t.renderParams;this.renderAbcNotation(e,n,a,s)}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.abcNotation,n=t.parserParams,a=t.engraverParams,s=t.renderParams;this.renderAbcNotation(e,n,a,s)}},{key:"render",value:function(){return Object(w.jsx)("div",{id:"id",style:{width:"100%"}})}}]),n}(a.PureComponent);U.defaultProps={abcNotation:"",parserParams:{},engraverParams:{responsive:"resize"},renderParams:{viewportHorizontal:!0}};var H=U;function z(t){var e=t.abc();return Object(w.jsxs)("div",{children:[Object(w.jsx)(H,{abcNotation:e}),Object(w.jsx)(M.Midi,{notation:e,midiParams:{qpm:333}},e)]})}var W=n(119),F=n(14),Q=n(7),V=n(162),Y=n(163),q=n(2),J=n(279),X=n(298).apikey,Z=(Object(f.a)({typography:{fontSize:22}}),[{field:"label",width:333},{field:"pass",width:144,type:"boolean",cellClassName:function(t){return Object(q.a)("super-app",{pass:t.value,fail:!t.value})}},{field:"notes",width:555}]),$=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={rows:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=Object(V.a)(Object(W.a)().mark((function t(){var e,n,a,s,o,r,i;return Object(W.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"c4 d4 e4 f4 g4 a4 b4 c5",e=Object(Q.a)(this.props.midi,2),n=e[0],a=e[1],s=this.props.key1,o={"Content-Type":"application/json",Accept:"application/json"},console.log([n,a,s]),t.next=7,J.post("https://us-central1-georgefane.cloudfunctions.net/counterpoint",{cantus_firmus:n,counterpoint:a,key:s,apikey:X,headers:o});case 7:r=t.sent,i=r.data.data.map((function(t,e){return Object(F.a)(Object(F.a)({},t),{},{id:e})})),this.setState({rows:i}),console.log(i);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.classes,e=this.state.rows,n={rows:e,columns:Z,autoHeight:!0,className:t.root,loading:!e.length};return Object(w.jsx)(Y.a,Object(F.a)({},n))}}]),n}(a.Component),tt=Object(g.a)({root:{"& .super-app.pass":{backgroundColor:"rgba(157, 255, 118, 0.49)"},"& .super-app.fail":{backgroundColor:"#d47483"}}})($),et=n(30),nt=n(378),at=n(379),st=n(381),ot=n(380),rt=Object(x.a)((function(t){return{root:{display:"flex",justifyContent:"center"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto",width:222},cover:{width:151},controls:{display:"flex",alignItems:"center",paddingLeft:t.spacing(1),paddingBottom:t.spacing(1)},playIcon:{height:38,width:38}}})),it=[{name:"Alex Beloiu",school:"UMich 2024",major:"CS",linkedin:"https://www.linkedin.com/in/alexandru-beloiu/",github:"https://github.com/beloiual",site:"https://github.com/beloiual",pic:"https://avatars.githubusercontent.com/u/69057074?v=4"},{name:"Yongwei Che",school:"Princeton 2024",major:"CS",linkedin:"https://www.linkedin.com/in/yongwei-che-66525b19b/",github:"https://github.com/YongweiChe",site:"https://yongweiche.github.io/",pic:"https://media-exp3.licdn.com/dms/image/C4E03AQEKUPa2GPYPHg/profile-displayphoto-shrink_200_200/0/1590019973658?e=1631145600&v=beta&t=Sy30H-36UXN-t5fgcmCuSPhKO-7-Kqcqc3PGndEQN60"},{name:"George Fane",school:"UMich 2024",major:"Business and CS",linkedin:"https://www.linkedin.com/in/george-fane/",github:"https://github.com/GeorgeFane",site:"http://georgefane.github.io/",pic:"https://avatars.githubusercontent.com/u/39439818?v=4"},{name:"Jason Zhang",school:"UMich 2024",major:"Composition and CS",linkedin:"https://www.linkedin.com/in/jason-zhang-2755ba1b9/",github:"https://github.com/zhangjt1",site:"https://counterpoint-checker.github.io/",pic:"https://media-exp3.licdn.com/dms/image/C4E03AQGLANbNVmkUHg/profile-displayphoto-shrink_800_800/0/1604624377309?e=1631145600&v=beta&t=xdriNg9aE79ymDdJ_AwOVA14VcyC4zAA8i8Y40xh6ew"}];function ct(t){var e=t.row,n=rt();Object(et.a)();return Object(w.jsxs)(nt.a,{className:n.root,children:[Object(w.jsxs)(at.a,{className:n.content,children:[Object(w.jsx)(m.a,{component:"h5",variant:"h5",children:e.name}),Object(w.jsx)(m.a,{variant:"subtitle1",children:e.school}),Object(w.jsx)(m.a,{variant:"subtitle1",children:e.major}),Object(w.jsx)(m.a,{children:Object(w.jsx)(ot.a,{href:e.linkedin,target:"_blank",children:"LinkedIn"})}),Object(w.jsx)(m.a,{children:Object(w.jsx)("a",{href:e.github,target:"_blank",children:"GitHub"})}),Object(w.jsx)(m.a,{children:Object(w.jsx)("a",{href:e.site,target:"_blank",children:"Website"})})]}),Object(w.jsx)(st.a,{className:n.cover,image:e.pic})]})}var ut=function(){var t=rt();return Object(w.jsx)(R.a,{container:!0,spacing:3,justifyContent:"center",className:t.root,children:it.map((function(t){return Object(w.jsx)(R.a,{item:!0,children:Object(w.jsx)(ct,{row:t})})}))})},lt=n(17),pt=n(120),dt=n.n(pt),jt=n(69),ht=(n(301),n(165)),bt=n.n(ht),mt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(w.jsx)("div",{children:this.props.children({containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight})})}}]),n}(s.a.Component),ft=(bt()()(mt),n(15)),vt=n(166),gt=n.n(vt),Ot=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).loadInstrument=function(t){a.setState({instrument:null}),gt.a.instrument(a.props.audioContext,t,{format:a.props.format,soundfont:a.props.soundfont,nameToUrl:function(t,e,n){return"".concat(a.props.hostname,"/").concat(e,"/").concat(t,"-").concat(n,".js")}}).then((function(t){a.setState({instrument:t})}))},a.playNote=function(t){a.props.audioContext.resume().then((function(){var e=a.state.instrument.play(t);a.setState({activeAudioNodes:Object.assign({},a.state.activeAudioNodes,Object(ft.a)({},t,e))})}))},a.stopNote=function(t){a.props.audioContext.resume().then((function(){a.state.activeAudioNodes[t]&&(a.state.activeAudioNodes[t].stop(),a.setState({activeAudioNodes:Object.assign({},a.state.activeAudioNodes,Object(ft.a)({},t,null))}))}))},a.stopAllNotes=function(){a.props.audioContext.resume().then((function(){Object.values(a.state.activeAudioNodes).forEach((function(t){t&&t.stop()})),a.setState({activeAudioNodes:{}})}))},a.state={activeAudioNodes:{},instrument:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.loadInstrument(this.props.instrumentName)}},{key:"componentDidUpdate",value:function(t,e){t.instrumentName!==this.props.instrumentName&&this.loadInstrument(this.props.instrumentName)}},{key:"render",value:function(){return this.props.render({isLoading:!this.state.instrument,playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes})}}]),n}(s.a.Component);Ot.defaultProps={format:"mp3",soundfont:"MusyngKite",instrumentName:"acoustic_grand_piano"};var xt=Ot,Nt=n(4),yt=["playNote","stopNote","recording","setRecording"],Ct=.2,kt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={keysDown:{},noteDuration:Ct},t.onPlayNoteInput=function(e){t.setState({notesRecorded:!1})},t.onStopNoteInput=function(e,n){var a=n.prevActiveNotes;!1===t.state.notesRecorded&&(t.recordNotes(a,t.state.noteDuration),t.setState({notesRecorded:!0,noteDuration:Ct}))},t.recordNotes=function(e,n){if("RECORDING"===t.props.recording.mode){var a=e.map((function(e){return{midiNumber:e,time:t.props.recording.currentTime,duration:n}}));t.props.setRecording({events:t.props.recording.events.concat(a),currentTime:t.props.recording.currentTime+n})}},t}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props,e=(t.playNote,t.stopNote,t.recording,t.setRecording,Object(Nt.a)(t,yt)),n=this.props.recording,a=n.mode,s=n.currentEvents,o="PLAYING"===a?s.map((function(t){return t.midiNumber})):null;return Object(w.jsx)("div",{children:Object(w.jsx)(jt.c,Object(F.a)({playNote:this.props.playNote,stopNote:this.props.stopNote,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:o},e))})}}]),n}(s.a.Component);kt.defaultProps={notesRecorded:!1};var wt=kt,St=n(384),At=n(388),Rt=n(324),Pt=n(74),Tt=n(320);function Et(t){var e=t.setLine,n=(t.setNotes,t.onClickClear),a=s.a.useState("Cantus Firmus"),o=Object(Q.a)(a,2),r=o[0],i=o[1];return Object(w.jsxs)(Pt.a,{component:"fieldset",children:[Object(w.jsx)(Tt.a,{component:"legend",children:"Which line are you editing?"}),Object(w.jsxs)(At.a,{"aria-label":"gender",name:"gender1",value:r,onChange:function(t){i(t.target.value),e(t.target.value),n()},children:[Object(w.jsx)(Rt.a,{value:"Cantus Firmus",control:Object(w.jsx)(St.a,{}),label:"Cantus Firmus"}),Object(w.jsx)(Rt.a,{value:"Counterpoint",control:Object(w.jsx)(St.a,{}),label:"Counterpoint"})]})]})}var It=new(window.AudioContext||window.webkitAudioContext),Lt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={recording:{mode:"RECORDING",events:[],currentTime:0,currentEvents:[]},firstNote:"c4",firstNoteTemp:"c4"},a.getRecordingEndTime=function(){return 0===a.state.recording.events.length?0:Math.max.apply(Math,Object(lt.a)(a.state.recording.events.map((function(t){return t.time+t.duration}))))},a.setRecording=function(t){a.setState({recording:Object.assign({},a.state.recording,t)});var e="Counterpoint"===a.state.line?a.props.setNotes2:a.props.setNotes1;if(t.events){var n=t.events.map((function(t){return t.midiNumber}));e(n),console.log("midis",n)}},a.setLine=function(t){a.setState({line:t}),console.log(a.state.line)},a.onClickPlay=function(){a.setRecording({mode:"PLAYING"}),dt.a.uniq(dt.a.flatMap(a.state.recording.events,(function(t){return[t.time,t.time+t.duration]}))).forEach((function(t){a.scheduledEvents.push(setTimeout((function(){var e=a.state.recording.events.filter((function(e){return e.time<=t&&e.time+e.duration>t}));a.setRecording({currentEvents:e})}),1e3*t))})),setTimeout((function(){a.onClickStop()}),1e3*a.getRecordingEndTime())},a.onClickStop=function(){a.scheduledEvents.forEach((function(t){clearTimeout(t)})),a.setRecording({mode:"RECORDING",currentEvents:[]})},a.onClickClear=function(){var t=a.state.recording.events;a.onClickStop(),a.setRecording({events:[],mode:"RECORDING",currentEvents:[],currentTime:0});var e="Counterpoint"===a.state.line?a.props.setNotes2:a.props.setNotes1;if(t){var n=t.map((function(t){return t.midiNumber}));e(n),console.log("midis",n)}},a.onSave=function(t){if(a.state.recording.events.length){var e=a.state.recording.events.map((function(t){return t.midiNumber}));t(e),console.log("midis",e)}},a.scheduledEvents=[],a}return Object(c.a)(n,[{key:"render",value:function(){var t=this,e=jt.b.fromNote(this.state.firstNote),n={first:e,last:e+23};console.log("noteRange",n);var a=jt.a.create({firstNote:n.first,lastNote:n.last,keyboardConfig:jt.a.HOME_ROW}),s="Counterpoint"===this.state.line?this.props.setNotes2:this.props.setNotes1;return Object(w.jsxs)("div",{children:[Object(w.jsx)("br",{}),Object(w.jsx)(Et,{setLine:this.setLine,setNotes:s,onClickClear:this.onClickClear}),Object(w.jsx)("br",{}),Object(w.jsx)("div",{className:"mt-5",children:Object(w.jsx)(xt,{instrumentName:"acoustic_grand_piano",audioContext:It,hostname:"https://d1pzp51pvbm36p.cloudfront.net",render:function(e){var s=e.isLoading,o=e.playNote,r=e.stopNote;return Object(w.jsx)(wt,{recording:t.state.recording,setRecording:t.setRecording,noteRange:n,width:300,playNote:o,stopNote:r,disabled:s,keyboardShortcuts:a})}})}),Object(w.jsx)("form",{onSubmit:function(e){var n=t.state.firstNoteTemp;t.setState({firstNote:n}),e.preventDefault()},children:Object(w.jsx)(T.a,{label:"Lowest Note",helperText:"Press Enter",value:this.state.firstNoteTemp,onChange:function(e){var n=e.target.value;t.setState({firstNoteTemp:n})}})})]})}}]),n}(s.a.Component),_t=Object(f.a)({typography:{}});function Dt(t){return t.map((function(t){return O.a.scientificToAbcNotation(O.b.midiToNoteName(t))})).join(" | ")}function Gt(t){return t.split(" ").map((function(t){return O.b.toMidi(t)}))}var Mt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;Object(i.a)(this,n),(a=e.call(this,t)).handleNext=function(){var t=a.state.activeStep+1;a.setState({activeStep:t})},a.handleBack=function(){var t=a.state.activeStep-1;a.setState({activeStep:t})},a.handleReset=function(){a.setState({activeStep:0})},a.abc=function(){return"\nL:1/1\nK:".concat(a.state.key,"\nV: 1 clef=").concat(a.state.clef1.toLowerCase(),"\n").concat(Dt(a.state.notes1),"\nV: 2 clef=").concat(a.state.clef2.toLowerCase(),"\n").concat(Dt(a.state.notes2),"\n    ")},a.midi=function(){return[Gt(a.state.notes1),Gt(a.state.notes2)]},a.stages=function(){return{Input:Object(w.jsxs)("div",{children:[Object(w.jsx)(Lt,{setNotes1:function(t){return a.setState({notes1:t})},setNotes2:function(t){return a.setState({notes2:t})}}),Object(w.jsx)(G,{key1:a.state.key,clef1:a.state.clef1,clef2:a.state.clef2,notes1:a.state.notes1,notes2:a.state.notes2,setKey:function(t){return a.setState({key:t})},setClef1:function(t){return a.setState({clef1:t})},setClef2:function(t){return a.setState({clef2:t})},setNotes1:function(t){return a.setState({notes1:t})},setNotes2:function(t){return a.setState({notes2:t})}}),Object(w.jsx)(z,{abc:a.abc})]}),Preview:Object(w.jsx)(z,{abc:a.abc}),Grade:Object(w.jsx)(tt,{midi:[a.state.notes1,a.state.notes2],key1:a.state.key}),Team:Object(w.jsx)(ut,{})}};var s=a.props.classes;return a.state={activeStep:0,classes:s,key:"C",clef1:"Treble",clef2:"Treble",notes1:[],notes2:[]},a}return Object(c.a)(n,[{key:"StepperTop",value:function(){var t=this.state,e=t.activeStep,n=t.classes,a=Object.keys(this.stages()).length;return Object(w.jsxs)("div",{children:[Object(w.jsx)(h.a,{disabled:0===e,onClick:e===a-1?this.handleReset:this.handleBack,className:n.backButton,children:e===a-1?"Reset":"Back"}),Object(w.jsx)(h.a,{disabled:e===a-1,variant:"contained",color:"primary",onClick:this.handleNext,children:"Next"})]})}},{key:"render",value:function(){var t=this.state,e=(t.classes,t.activeStep),n=(t.notes1,Object.keys(this.stages())),a=Object.values(this.stages());return Object(w.jsxs)(v.a,{theme:_t,children:[Object(w.jsx)(A,{}),Object(w.jsx)(p.a,{activeStep:e,alternativeLabel:!0,children:n.map((function(t){return Object(w.jsx)(d.a,{children:Object(w.jsx)(j.a,{children:t})},t)}))}),Object(w.jsxs)(b.a,{mx:9,children:[this.StepperTop(),Object(w.jsx)(m.a,{variant:"h4",children:a[e]})]})]})}}]),n}(s.a.Component),Bt=Object(g.a)((function(t){return{root:{width:"100%",padding:t.spacing(9)},backButton:{marginRight:t.spacing(1)},instructions:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}}}))(Mt);r.a.render(Object(w.jsx)(Bt,{}),document.getElementById("root"))}},[[317,1,2]]]);
//# sourceMappingURL=main.d875798d.chunk.js.map