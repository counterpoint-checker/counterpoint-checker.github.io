(this["webpackJsonpsimple-reactjs-app"]=this["webpackJsonpsimple-reactjs-app"]||[]).push([[0],{298:function(e){e.exports=JSON.parse('{"apikey":"pUQnnpujqRWcm5aQS295rLvQ79VjPrAW"}')},317:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(16),r=n.n(o),i=n(20),c=n(18),u=n(23),l=n(24),p=n(386),d=n(382),j=n(385),h=n(59),b=n(383),m=n(169),f=n(53),v=n(377),g=n(6),O=n(100),x=n(135),N=n(371),y=n(372),C=n(70),k=n(373),w=n(5),S=Object(x.a)((function(e){return{root:{flexGrow:1}}}));function A(){var e=S();return Object(w.jsxs)("div",{children:[Object(w.jsx)(N.a,{children:Object(w.jsxs)(y.a,{children:[Object(w.jsx)("div",{className:e.root,children:Object(w.jsx)("img",{width:"222",src:"https://media.discordapp.net/attachments/705838282440835164/866890707494109194/logo1_no_background.png"})}),Object(w.jsx)(m.a,{className:e.root,variant:"body1",children:"Alex Beloiu, Yongwei Che, George Fane, Jason Zhang"}),Object(w.jsx)(C.a,{color:"inherit",href:"https://github.com/counterpoint-checker",target:"_blank",children:Object(w.jsx)(k.a,{})})]})}),Object(w.jsx)(y.a,{})]})}var R=n(374),P=n(101),T=n(127),E=n(43),I=Object(x.a)((function(e){return{root:{},paper:{padding:e.spacing(2)}}}));function L(e){var t=I();return Object(w.jsx)(R.a,{item:!0,xs:!0,children:Object(w.jsx)(P.a,{className:t.paper,children:Object(w.jsx)(m.a,{variant:"h6",className:t.title,children:e.label})})})}function _(e){var t=I();return Object(w.jsx)(R.a,{item:!0,xs:!0,children:Object(w.jsx)(P.a,{className:t.paper,children:Object(w.jsx)(T.a,{select:!0,label:"Key",value:e.clef,onChange:function(t){return e.setClef(t.target.value)},children:"Treble Alto Bass".split(" ").map((function(e){return Object(w.jsx)(E.a,{value:e,children:e})}))})})})}function D(e){var t=I();return Object(w.jsx)(R.a,{item:!0,xs:!0,children:Object(w.jsx)(P.a,{className:t.paper,children:Object(w.jsx)(T.a,{label:"Notes",value:e.notes,onChange:function(t){return e.setNotes(t.target.value)},InputProps:{readOnly:!0}})})})}function G(e){var t=I(),n=["Key: [note][#,b, ][m, ]","e.g. C, C#, Cm, C#m"];return Object(w.jsxs)(R.a,{container:!0,spacing:3,children:[Object(w.jsxs)(R.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(w.jsx)(L,{label:"Cantus Firmus"}),Object(w.jsx)(_,{clef:e.clef1,setClef:e.setClef1}),Object(w.jsx)(D,{notes:e.notes1,setNotes:e.setNotes1}),Object(w.jsx)(R.a,{item:!0,xs:!0,children:Object(w.jsx)(P.a,{className:t.paper,children:Object(w.jsx)(T.a,{label:"Key",value:e.key1,onChange:function(t){return e.setKey(t.target.value)}})})})]}),Object(w.jsxs)(R.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(w.jsx)(L,{label:"Counterpoint"}),Object(w.jsx)(_,{clef:e.clef2,setClef:e.setClef2}),Object(w.jsx)(D,{notes:e.notes2,setNotes:e.setNotes2}),Object(w.jsx)(R.a,{item:!0,xs:!0,children:n.map((function(e){return Object(w.jsx)(m.a,{children:e})}))})]})]})}var M=n(160),B=n(161),K=n.n(B),U=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"renderAbcNotation",value:function(e,t,n,a){K.a.renderAbc("id",e,t,n,a)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.abcNotation,n=e.parserParams,a=e.engraverParams,s=e.renderParams;this.renderAbcNotation(t,n,a,s)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.abcNotation,n=e.parserParams,a=e.engraverParams,s=e.renderParams;this.renderAbcNotation(t,n,a,s)}},{key:"render",value:function(){return Object(w.jsx)("div",{id:"id",style:{width:"100%"}})}}]),n}(a.PureComponent);U.defaultProps={abcNotation:"",parserParams:{},engraverParams:{responsive:"resize"},renderParams:{viewportHorizontal:!0}};var H=U;function z(e){var t=e.abc();return Object(w.jsxs)("div",{children:[Object(w.jsx)(H,{abcNotation:t}),Object(w.jsx)(M.Midi,{notation:t,midiParams:{qpm:333}},t)]})}var F=n(119),W=n(14),Y=n(7),J=n(162),Q=n(163),V=n(2),q=n(279),Z=n(298).apikey,X=(Object(f.a)({typography:{fontSize:22}}),[{field:"label",width:333},{field:"pass",width:144,type:"boolean",cellClassName:function(e){return Object(V.a)("super-app",{pass:e.value,fail:!e.value})}},{field:"notes",width:555}]),$=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={rows:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(J.a)(Object(F.a)().mark((function e(){var t,n,a,s,o,r,i;return Object(F.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"c4 d4 e4 f4 g4 a4 b4 c5",t=Object(Y.a)(this.props.midi,2),n=t[0],a=t[1],s=this.props.key1,o={"Content-Type":"application/json",Accept:"application/json"},console.log([n,a,s]),e.next=7,q.post("https://us-central1-georgefane.cloudfunctions.net/counterpoint",{cantus_firmus:n,counterpoint:a,key:s,apikey:Z,headers:o});case 7:r=e.sent,i=r.data.data.map((function(e,t){return Object(W.a)(Object(W.a)({},e),{},{id:t})})),this.setState({rows:i}),console.log(i);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.state.rows,n={rows:t,columns:X,autoHeight:!0,className:e.root,loading:!t.length};return Object(w.jsx)(Q.a,Object(W.a)({},n))}}]),n}(a.Component),ee=Object(g.a)({root:{"& .super-app.pass":{backgroundColor:"rgba(157, 255, 118, 0.49)"},"& .super-app.fail":{backgroundColor:"#d47483"}}})($),te=n(30),ne=n(378),ae=n(379),se=n(381),oe=n(380),re=Object(x.a)((function(e){return{root:{display:"flex",justifyContent:"center"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto",width:222},cover:{width:151},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},playIcon:{height:38,width:38}}})),ie=[{name:"Alex Beloiu",school:"UMich 2024",major:"CS",linkedin:"https://www.linkedin.com/in/alexandru-beloiu/",github:"https://github.com/beloiual",site:"https://github.com/beloiual",pic:"https://avatars.githubusercontent.com/u/69057074?v=4"},{name:"Yongwei Che",school:"Princeton 2024",major:"CS",linkedin:"https://www.linkedin.com/in/yongwei-che-66525b19b/",github:"https://github.com/YongweiChe",site:"https://yongweiche.github.io/",pic:"https://media-exp3.licdn.com/dms/image/C4E03AQEKUPa2GPYPHg/profile-displayphoto-shrink_200_200/0/1590019973658?e=1631145600&v=beta&t=Sy30H-36UXN-t5fgcmCuSPhKO-7-Kqcqc3PGndEQN60"},{name:"George Fane",school:"UMich 2024",major:"Business and CS",linkedin:"https://www.linkedin.com/in/george-fane/",github:"https://github.com/GeorgeFane",site:"http://georgefane.github.io/",pic:"https://avatars.githubusercontent.com/u/39439818?v=4"},{name:"Jason Zhang",school:"UMich 2024",major:"Composition and CS",linkedin:"https://www.linkedin.com/in/jason-zhang-2755ba1b9/",github:"https://github.com/zhangjt1",site:"https://counterpoint-checker.github.io/",pic:"https://media-exp3.licdn.com/dms/image/C4E03AQGLANbNVmkUHg/profile-displayphoto-shrink_800_800/0/1604624377309?e=1631145600&v=beta&t=xdriNg9aE79ymDdJ_AwOVA14VcyC4zAA8i8Y40xh6ew"}];function ce(e){var t=e.row,n=re();Object(te.a)();return Object(w.jsxs)(ne.a,{className:n.root,children:[Object(w.jsxs)(ae.a,{className:n.content,children:[Object(w.jsx)(m.a,{component:"h5",variant:"h5",children:t.name}),Object(w.jsx)(m.a,{variant:"subtitle1",children:t.school}),Object(w.jsx)(m.a,{variant:"subtitle1",children:t.major}),Object(w.jsx)(m.a,{children:Object(w.jsx)(oe.a,{href:t.linkedin,target:"_blank",children:"LinkedIn"})}),Object(w.jsx)(m.a,{children:Object(w.jsx)("a",{href:t.github,target:"_blank",children:"GitHub"})}),Object(w.jsx)(m.a,{children:Object(w.jsx)("a",{href:t.site,target:"_blank",children:"Website"})})]}),Object(w.jsx)(se.a,{className:n.cover,image:t.pic})]})}var ue=function(){var e=re();return Object(w.jsx)(R.a,{container:!0,spacing:3,justifyContent:"center",className:e.root,children:ie.map((function(e){return Object(w.jsx)(R.a,{item:!0,children:Object(w.jsx)(ce,{row:e})})}))})},le=n(17),pe=n(120),de=n.n(pe),je=n(69),he=(n(301),n(165)),be=n.n(he),me=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(w.jsx)("div",{children:this.props.children({containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight})})}}]),n}(s.a.Component),fe=(be()()(me),n(15)),ve=n(166),ge=n.n(ve),Oe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).loadInstrument=function(e){a.setState({instrument:null}),ge.a.instrument(a.props.audioContext,e,{format:a.props.format,soundfont:a.props.soundfont,nameToUrl:function(e,t,n){return"".concat(a.props.hostname,"/").concat(t,"/").concat(e,"-").concat(n,".js")}}).then((function(e){a.setState({instrument:e})}))},a.playNote=function(e){a.props.audioContext.resume().then((function(){var t=a.state.instrument.play(e);a.setState({activeAudioNodes:Object.assign({},a.state.activeAudioNodes,Object(fe.a)({},e,t))})}))},a.stopNote=function(e){a.props.audioContext.resume().then((function(){a.state.activeAudioNodes[e]&&(a.state.activeAudioNodes[e].stop(),a.setState({activeAudioNodes:Object.assign({},a.state.activeAudioNodes,Object(fe.a)({},e,null))}))}))},a.stopAllNotes=function(){a.props.audioContext.resume().then((function(){Object.values(a.state.activeAudioNodes).forEach((function(e){e&&e.stop()})),a.setState({activeAudioNodes:{}})}))},a.state={activeAudioNodes:{},instrument:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.loadInstrument(this.props.instrumentName)}},{key:"componentDidUpdate",value:function(e,t){e.instrumentName!==this.props.instrumentName&&this.loadInstrument(this.props.instrumentName)}},{key:"render",value:function(){return this.props.render({isLoading:!this.state.instrument,playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes})}}]),n}(s.a.Component);Oe.defaultProps={format:"mp3",soundfont:"MusyngKite",instrumentName:"acoustic_grand_piano"};var xe=Oe,Ne=n(4),ye=["playNote","stopNote","recording","setRecording"],Ce=.2,ke=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={keysDown:{},noteDuration:Ce},e.onPlayNoteInput=function(t){e.setState({notesRecorded:!1})},e.onStopNoteInput=function(t,n){var a=n.prevActiveNotes;!1===e.state.notesRecorded&&(e.recordNotes(a,e.state.noteDuration),e.setState({notesRecorded:!0,noteDuration:Ce}))},e.recordNotes=function(t,n){if("RECORDING"===e.props.recording.mode){var a=t.map((function(t){return{midiNumber:t,time:e.props.recording.currentTime,duration:n}}));e.props.setRecording({events:e.props.recording.events.concat(a),currentTime:e.props.recording.currentTime+n})}},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.playNote,e.stopNote,e.recording,e.setRecording,Object(Ne.a)(e,ye)),n=this.props.recording,a=n.mode,s=n.currentEvents,o="PLAYING"===a?s.map((function(e){return e.midiNumber})):null;return Object(w.jsx)("div",{children:Object(w.jsx)(je.c,Object(W.a)({playNote:this.props.playNote,stopNote:this.props.stopNote,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:o},t))})}}]),n}(s.a.Component);ke.defaultProps={notesRecorded:!1};var we=ke,Se=n(384),Ae=n(388),Re=n(324),Pe=n(74),Te=n(320);function Ee(e){var t=e.setLine,n=(e.setNotes,e.onClickClear),a=s.a.useState("Cantus Firmus"),o=Object(Y.a)(a,2),r=o[0],i=o[1];return Object(w.jsxs)(Pe.a,{component:"fieldset",children:[Object(w.jsx)(Te.a,{component:"legend",children:"Which line are you editing?"}),Object(w.jsxs)(Ae.a,{"aria-label":"gender",name:"gender1",value:r,onChange:function(e){i(e.target.value),t(e.target.value),n()},children:[Object(w.jsx)(Re.a,{value:"Cantus Firmus",control:Object(w.jsx)(Se.a,{}),label:"Cantus Firmus"}),Object(w.jsx)(Re.a,{value:"Counterpoint",control:Object(w.jsx)(Se.a,{}),label:"Counterpoint"})]})]})}var Ie=new(window.AudioContext||window.webkitAudioContext),Le=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={recording:{mode:"RECORDING",events:[],currentTime:0,currentEvents:[]},firstNote:"c4",firstNoteTemp:"c4"},a.getRecordingEndTime=function(){return 0===a.state.recording.events.length?0:Math.max.apply(Math,Object(le.a)(a.state.recording.events.map((function(e){return e.time+e.duration}))))},a.setRecording=function(e){a.setState({recording:Object.assign({},a.state.recording,e)});var t="Counterpoint"===a.state.line?a.props.setNotes2:a.props.setNotes1;if(e.events){var n=e.events.map((function(e){return e.midiNumber}));t(n),console.log("midis",n)}},a.setLine=function(e){a.setState({line:e}),console.log(a.state.line)},a.onClickPlay=function(){a.setRecording({mode:"PLAYING"}),de.a.uniq(de.a.flatMap(a.state.recording.events,(function(e){return[e.time,e.time+e.duration]}))).forEach((function(e){a.scheduledEvents.push(setTimeout((function(){var t=a.state.recording.events.filter((function(t){return t.time<=e&&t.time+t.duration>e}));a.setRecording({currentEvents:t})}),1e3*e))})),setTimeout((function(){a.onClickStop()}),1e3*a.getRecordingEndTime())},a.onClickStop=function(){a.scheduledEvents.forEach((function(e){clearTimeout(e)})),a.setRecording({mode:"RECORDING",currentEvents:[]})},a.onClickClear=function(){var e=a.state.recording.events;a.onClickStop(),a.setRecording({events:[],mode:"RECORDING",currentEvents:[],currentTime:0});var t="Counterpoint"===a.state.line?a.props.setNotes2:a.props.setNotes1;if(e){var n=e.map((function(e){return e.midiNumber}));t(n),console.log("midis",n)}},a.onSave=function(e){if(a.state.recording.events.length){var t=a.state.recording.events.map((function(e){return e.midiNumber}));e(t),console.log("midis",t)}},a.scheduledEvents=[],a}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=je.b.fromNote(this.state.firstNote),n={first:t,last:t+23};console.log("noteRange",n);var a=je.a.create({firstNote:n.first,lastNote:n.last,keyboardConfig:je.a.HOME_ROW}),s="Counterpoint"===this.state.line?this.props.setNotes2:this.props.setNotes1;return Object(w.jsxs)("div",{children:[Object(w.jsx)("br",{}),Object(w.jsx)(Ee,{setLine:this.setLine,setNotes:s,onClickClear:this.onClickClear}),Object(w.jsx)("br",{}),Object(w.jsx)("div",{className:"mt-5",children:Object(w.jsx)(xe,{instrumentName:"acoustic_grand_piano",audioContext:Ie,hostname:"https://d1pzp51pvbm36p.cloudfront.net",render:function(t){var s=t.isLoading,o=t.playNote,r=t.stopNote;return Object(w.jsx)(we,{recording:e.state.recording,setRecording:e.setRecording,noteRange:n,width:300,playNote:o,stopNote:r,disabled:s,keyboardShortcuts:a})}})}),Object(w.jsx)("form",{onSubmit:function(t){var n=e.state.firstNoteTemp;e.setState({firstNote:n}),t.preventDefault()},children:Object(w.jsx)(T.a,{label:"Lowest Note",helperText:"Press Enter",value:this.state.firstNoteTemp,onChange:function(t){var n=t.target.value;e.setState({firstNoteTemp:n})}})})]})}}]),n}(s.a.Component),_e=Object(f.a)({typography:{}});function De(e){return e.map((function(e){return O.a.scientificToAbcNotation(O.b.midiToNoteName(e))})).join(" | ")}function Ge(e){return e.split(" ").map((function(e){return O.b.toMidi(e)}))}var Me=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).handleNext=function(){var e=a.state.activeStep+1;a.setState({activeStep:e})},a.handleBack=function(){var e=a.state.activeStep-1;a.setState({activeStep:e})},a.handleReset=function(){a.setState({activeStep:0})},a.abc=function(){return"\nL:1/1\nK:".concat(a.state.key,"\nV: 1 clef=").concat(a.state.clef1.toLowerCase(),"\n").concat(De(a.state.notes1),"\nV: 2 clef=").concat(a.state.clef2.toLowerCase(),"\n").concat(De(a.state.notes2),"\n    ")},a.midi=function(){return[Ge(a.state.notes1),Ge(a.state.notes2)]},a.stages=function(){return{Input:Object(w.jsxs)("div",{children:[Object(w.jsx)(Le,{setNotes1:function(e){return a.setState({notes1:e})},setNotes2:function(e){return a.setState({notes2:e})}}),Object(w.jsx)(G,{key1:a.state.key,clef1:a.state.clef1,clef2:a.state.clef2,notes1:a.state.notes1,notes2:a.state.notes2,setKey:function(e){return a.setState({key:e})},setClef1:function(e){return a.setState({clef1:e})},setClef2:function(e){return a.setState({clef2:e})},setNotes1:function(e){return a.setState({notes1:e})},setNotes2:function(e){return a.setState({notes2:e})}}),Object(w.jsx)(z,{abc:a.abc})]}),Preview:Object(w.jsx)(z,{abc:a.abc}),Grade:Object(w.jsx)(ee,{midi:[a.state.notes1,a.state.notes2],key1:a.state.key}),Team:Object(w.jsx)(ue,{})}};var s=a.props.classes;return a.state={activeStep:0,classes:s,key:"C",clef1:"Treble",clef2:"Treble",notes1:[],notes2:[]},a}return Object(c.a)(n,[{key:"StepperTop",value:function(){var e=this.state,t=e.activeStep,n=e.classes,a=Object.keys(this.stages()).length;return Object(w.jsxs)("div",{children:[Object(w.jsx)(h.a,{disabled:0===t,onClick:t===a-1?this.handleReset:this.handleBack,className:n.backButton,children:t===a-1?"Reset":"Back"}),Object(w.jsx)(h.a,{disabled:t===a-1,variant:"contained",color:"primary",onClick:this.handleNext,children:"Next"})]})}},{key:"render",value:function(){var e=this.state,t=(e.classes,e.activeStep),n=(e.notes1,Object.keys(this.stages())),a=Object.values(this.stages());return Object(w.jsxs)(v.a,{theme:_e,children:[Object(w.jsx)(A,{}),Object(w.jsx)(p.a,{activeStep:t,alternativeLabel:!0,children:n.map((function(e){return Object(w.jsx)(d.a,{children:Object(w.jsx)(j.a,{children:e})},e)}))}),Object(w.jsxs)(b.a,{mx:9,children:[this.StepperTop(),Object(w.jsx)(m.a,{variant:"h4",children:a[t]})]})]})}}]),n}(s.a.Component),Be=Object(g.a)((function(e){return{root:{width:"100%",padding:e.spacing(9)},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}))(Me);r.a.render(Object(w.jsx)(Be,{}),document.getElementById("root"))}},[[317,1,2]]]);
//# sourceMappingURL=main.98341409.chunk.js.map